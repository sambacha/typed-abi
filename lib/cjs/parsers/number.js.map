{"version":3,"file":"number.js","names":["NUMBER_REGEX","isSigned","type","startsWith","asNumber","value","BigInt","number","isDynamic","isType","test","encode","buffer","concat","toTwosComplement","toBuffer","decode","slice","fromTwosComplement","toNumber"],"sources":["../../../src/parsers/number.ts"],"sourcesContent":["import { DecodeArgs, NumberLike, Parser } from '../types';\nimport { concat, fromTwosComplement, toBuffer, toNumber, toTwosComplement } from '../utils';\n\nconst NUMBER_REGEX = /^u?int([0-9]*)?$/;\n\n/**\n * Check if a number type is signed.\n *\n * @param type The type to check.\n * @return Whether the type is signed.\n */\nexport const isSigned = (type: string): boolean => {\n  return !type.startsWith('u');\n};\n\n/**\n * Get a number-like value as bigint.\n *\n * @param value The number-like value to parse.\n * @return The value parsed as bigint.\n */\nexport const asNumber = (value: NumberLike): bigint => {\n  if (typeof value === 'bigint') {\n    return value;\n  }\n\n  return BigInt(value);\n};\n\nexport const number: Parser<NumberLike, bigint> = {\n  isDynamic: false,\n\n  /**\n   * Check if a type is a number type.\n   *\n   * @return Whether the type is a number type.\n   */\n  isType(type: string): boolean {\n    return NUMBER_REGEX.test(type);\n  },\n\n  encode({ type, buffer, value }): Uint8Array {\n    const number = asNumber(value);\n\n    if (isSigned(type)) {\n      return concat([buffer, toTwosComplement(number, 32)]);\n    }\n\n    return concat([buffer, toBuffer(number)]);\n  },\n\n  decode({ type, value }: DecodeArgs): bigint {\n    const buffer = value.slice(0, 32);\n    if (isSigned(type)) {\n      return fromTwosComplement(buffer);\n    }\n\n    return toNumber(buffer);\n  }\n};\n"],"mappings":";;;;;;;AACA;;AAEA,MAAMA,YAAY,GAAG,kBAArB;;AAQO,MAAMC,QAAQ,GAAIC,IAAD,IAA2B;EACjD,OAAO,CAACA,IAAI,CAACC,UAAL,CAAgB,GAAhB,CAAR;AACD,CAFM;;;;AAUA,MAAMC,QAAQ,GAAIC,KAAD,IAA+B;EACrD,IAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;IAC7B,OAAOA,KAAP;EACD;;EAED,OAAOC,MAAM,CAACD,KAAD,CAAb;AACD,CANM;;;AAQA,MAAME,MAAkC,GAAG;EAChDC,SAAS,EAAE,KADqC;;EAQhDC,MAAM,CAACP,IAAD,EAAwB;IAC5B,OAAOF,YAAY,CAACU,IAAb,CAAkBR,IAAlB,CAAP;EACD,CAV+C;;EAYhDS,MAAM,CAAC;IAAET,IAAF;IAAQU,MAAR;IAAgBP;EAAhB,CAAD,EAAsC;IAC1C,MAAME,MAAM,GAAGH,QAAQ,CAACC,KAAD,CAAvB;;IAEA,IAAIJ,QAAQ,CAACC,IAAD,CAAZ,EAAoB;MAClB,OAAO,IAAAW,aAAA,EAAO,CAACD,MAAD,EAAS,IAAAE,uBAAA,EAAiBP,MAAjB,EAAyB,EAAzB,CAAT,CAAP,CAAP;IACD;;IAED,OAAO,IAAAM,aAAA,EAAO,CAACD,MAAD,EAAS,IAAAG,eAAA,EAASR,MAAT,CAAT,CAAP,CAAP;EACD,CApB+C;;EAsBhDS,MAAM,CAAC;IAAEd,IAAF;IAAQG;EAAR,CAAD,EAAsC;IAC1C,MAAMO,MAAM,GAAGP,KAAK,CAACY,KAAN,CAAY,CAAZ,EAAe,EAAf,CAAf;;IACA,IAAIhB,QAAQ,CAACC,IAAD,CAAZ,EAAoB;MAClB,OAAO,IAAAgB,yBAAA,EAAmBN,MAAnB,CAAP;IACD;;IAED,OAAO,IAAAO,eAAA,EAASP,MAAT,CAAP;EACD;;AA7B+C,CAA3C"}