{"version":3,"file":"iterator.js","names":["iterate","buffer","size","pointer","length","skip","Error","value","subarray","undefined","Uint8Array"],"sources":["../../src/iterator.ts"],"sourcesContent":["interface IteratorValue {\n  skip(length: number): void;\n  value: Uint8Array;\n}\n\n/**\n * Iterate over a buffer with the specified size. This will yield a part of the buffer starting at an increment of the\n * specified size, until the end of the buffer is reached.\n *\n * Calling the `skip` function will make it skip the specified number of bytes.\n *\n * @param buffer The buffer to iterate over.\n * @param [size] The number of bytes to iterate with.\n */\nexport const iterate = function* (\n  buffer: Uint8Array,\n  size = 32\n): Generator<IteratorValue, IteratorValue, IteratorValue> {\n  for (let pointer = 0; pointer < buffer.length; pointer += size) {\n    const skip = (length: number) => {\n      if (length % size !== 0) {\n        throw new Error('Length must be divisible by size');\n      }\n\n      pointer += length;\n    };\n\n    const value = buffer.subarray(pointer);\n\n    yield { skip, value };\n  }\n\n  return {\n    skip: () => undefined,\n    value: new Uint8Array()\n  };\n};\n"],"mappings":";;;;;;;AAcO,MAAMA,OAAO,GAAG,WACrBC,MADqB,EAErBC,IAAI,GAAG,EAFc,EAGmC;EACxD,KAAK,IAAIC,OAAO,GAAG,CAAnB,EAAsBA,OAAO,GAAGF,MAAM,CAACG,MAAvC,EAA+CD,OAAO,IAAID,IAA1D,EAAgE;IAC9D,MAAMG,IAAI,GAAID,MAAD,IAAoB;MAC/B,IAAIA,MAAM,GAAGF,IAAT,KAAkB,CAAtB,EAAyB;QACvB,MAAM,IAAII,KAAJ,CAAU,kCAAV,CAAN;MACD;;MAEDH,OAAO,IAAIC,MAAX;IACD,CAND;;IAQA,MAAMG,KAAK,GAAGN,MAAM,CAACO,QAAP,CAAgBL,OAAhB,CAAd;IAEA,MAAM;MAAEE,IAAF;MAAQE;IAAR,CAAN;EACD;;EAED,OAAO;IACLF,IAAI,EAAE,MAAMI,SADP;IAELF,KAAK,EAAE,IAAIG,UAAJ;EAFF,CAAP;AAID,CAtBM"}