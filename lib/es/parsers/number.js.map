{"version":3,"file":"number.js","names":["concat","fromTwosComplement","toBuffer","toNumber","toTwosComplement","NUMBER_REGEX","isSigned","type","startsWith","asNumber","value","BigInt","number","isDynamic","isType","test","encode","buffer","decode","slice"],"sources":["../../../src/parsers/number.ts"],"sourcesContent":["import type { DecodeArgs, NumberLike, Parser } from '../types';\nimport { concat, fromTwosComplement, toBuffer, toNumber, toTwosComplement } from '../utils';\n\nconst NUMBER_REGEX = /^u?int([0-9]*)?$/;\n\n/**\n * Check if a number type is signed.\n *\n * @param type The type to check.\n * @return Whether the type is signed.\n */\nexport const isSigned = (type: string): boolean => {\n  return !type.startsWith('u');\n};\n\n/**\n * Get a number-like value as bigint.\n *\n * @param value The number-like value to parse.\n * @return The value parsed as bigint.\n */\nexport const asNumber = (value: NumberLike): bigint => {\n  if (typeof value === 'bigint') {\n    return value;\n  }\n\n  return BigInt(value);\n};\n\nexport const number: Parser<NumberLike, bigint> = {\n  isDynamic: false,\n\n  /**\n   * Check if a type is a number type.\n   *\n   * @return Whether the type is a number type.\n   */\n  isType(type: string): boolean {\n    return NUMBER_REGEX.test(type);\n  },\n\n  encode({ type, buffer, value }): Uint8Array {\n    const number = asNumber(value);\n\n    if (isSigned(type)) {\n      return concat([buffer, toTwosComplement(number, 32)]);\n    }\n\n    return concat([buffer, toBuffer(number)]);\n  },\n\n  decode({ type, value }: DecodeArgs): bigint {\n    const buffer = value.slice(0, 32);\n    if (isSigned(type)) {\n      return fromTwosComplement(buffer);\n    }\n\n    return toNumber(buffer);\n  }\n};\n"],"mappings":"AACA,SAASA,MAAT,EAAiBC,kBAAjB,EAAqCC,QAArC,EAA+CC,QAA/C,EAAyDC,gBAAzD,QAAiF,UAAjF;AAEA,MAAMC,YAAY,GAAG,kBAArB;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,MAAMC,QAAQ,GAAIC,IAAD,IAA2B;EACjD,OAAO,CAACA,IAAI,CAACC,UAAL,CAAgB,GAAhB,CAAR;AACD,CAFM;AAIP;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,MAAMC,QAAQ,GAAIC,KAAD,IAA+B;EACrD,IAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;IAC7B,OAAOA,KAAP;EACD;;EAED,OAAOC,MAAM,CAACD,KAAD,CAAb;AACD,CANM;AAQP,OAAO,MAAME,MAAkC,GAAG;EAChDC,SAAS,EAAE,KADqC;;EAGhD;AACF;AACA;AACA;AACA;EACEC,MAAM,CAACP,IAAD,EAAwB;IAC5B,OAAOF,YAAY,CAACU,IAAb,CAAkBR,IAAlB,CAAP;EACD,CAV+C;;EAYhDS,MAAM,CAAC;IAAET,IAAF;IAAQU,MAAR;IAAgBP;EAAhB,CAAD,EAAsC;IAC1C,MAAME,MAAM,GAAGH,QAAQ,CAACC,KAAD,CAAvB;;IAEA,IAAIJ,QAAQ,CAACC,IAAD,CAAZ,EAAoB;MAClB,OAAOP,MAAM,CAAC,CAACiB,MAAD,EAASb,gBAAgB,CAACQ,MAAD,EAAS,EAAT,CAAzB,CAAD,CAAb;IACD;;IAED,OAAOZ,MAAM,CAAC,CAACiB,MAAD,EAASf,QAAQ,CAACU,MAAD,CAAjB,CAAD,CAAb;EACD,CApB+C;;EAsBhDM,MAAM,CAAC;IAAEX,IAAF;IAAQG;EAAR,CAAD,EAAsC;IAC1C,MAAMO,MAAM,GAAGP,KAAK,CAACS,KAAN,CAAY,CAAZ,EAAe,EAAf,CAAf;;IACA,IAAIb,QAAQ,CAACC,IAAD,CAAZ,EAAoB;MAClB,OAAON,kBAAkB,CAACgB,MAAD,CAAzB;IACD;;IAED,OAAOd,QAAQ,CAACc,MAAD,CAAf;EACD;;AA7B+C,CAA3C"}