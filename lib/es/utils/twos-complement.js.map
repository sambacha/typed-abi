{"version":3,"file":"twos-complement.js","names":["toBuffer","fromTwosComplement","buffer","bufferValue","value","byte","BigInt","asIntN","length","toTwosComplement","Uint8Array","i","Number","asUintN","reverse"],"sources":["../../../src/utils/twos-complement.ts"],"sourcesContent":["import { toBuffer } from './buffer';\n\n/**\n * Get a bigint from a two's complement encoded buffer or hexadecimal string.\n *\n * @param buffer The buffer to get the number for.\n * @return The parsed number.\n */\nexport const fromTwosComplement = (buffer: string | Uint8Array): bigint => {\n  const bufferValue = toBuffer(buffer);\n\n  let value = 0n;\n  for (const byte of bufferValue) {\n    value = (value << 8n) + BigInt(byte);\n  }\n\n  return BigInt.asIntN(bufferValue.length * 8, value);\n};\n\n/**\n * Get a two's complement encoded buffer from a bigint.\n *\n * @param value The number to get the buffer for.\n * @param length The number of bytes to pad the buffer to.\n * @return The two's complement encoded buffer.\n */\nexport const toTwosComplement = (value: bigint, length: number): Uint8Array => {\n  const buffer = new Uint8Array(length);\n  for (let i = 0; i < buffer.length; i++) {\n    buffer[i] = Number(BigInt.asUintN(8, value));\n    value = value >> 8n;\n  }\n\n  return buffer.reverse();\n};\n"],"mappings":"AAAA,SAASA,QAAT,QAAyB,UAAzB;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,MAAMC,kBAAkB,GAAIC,MAAD,IAAyC;EACzE,MAAMC,WAAW,GAAGH,QAAQ,CAACE,MAAD,CAA5B;EAEA,IAAIE,KAAK,GAAG,EAAZ;;EACA,KAAK,MAAMC,IAAX,IAAmBF,WAAnB,EAAgC;IAC9BC,KAAK,GAAG,CAACA,KAAK,IAAI,EAAV,IAAgBE,MAAM,CAACD,IAAD,CAA9B;EACD;;EAED,OAAOC,MAAM,CAACC,MAAP,CAAcJ,WAAW,CAACK,MAAZ,GAAqB,CAAnC,EAAsCJ,KAAtC,CAAP;AACD,CATM;AAWP;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,MAAMK,gBAAgB,GAAG,CAACL,KAAD,EAAgBI,MAAhB,KAA+C;EAC7E,MAAMN,MAAM,GAAG,IAAIQ,UAAJ,CAAeF,MAAf,CAAf;;EACA,KAAK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGT,MAAM,CAACM,MAA3B,EAAmCG,CAAC,EAApC,EAAwC;IACtCT,MAAM,CAACS,CAAD,CAAN,GAAYC,MAAM,CAACN,MAAM,CAACO,OAAP,CAAe,CAAf,EAAkBT,KAAlB,CAAD,CAAlB;IACAA,KAAK,GAAGA,KAAK,IAAI,EAAjB;EACD;;EAED,OAAOF,MAAM,CAACY,OAAP,EAAP;AACD,CARM"}