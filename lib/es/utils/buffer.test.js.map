{"version":3,"file":"buffer.test.js","names":["TextDecoder","TextEncoder","addPadding","concat","fromHex","fromUtf8","getTextDecoder","getTextEncoder","set","stripPrefix","toBuffer","toHex","toNumber","toUtf8","describe","it","expect","toBe","toBeInstanceOf","buffer","Uint8Array","toThrow"],"sources":["../../../src/utils/buffer.test.ts"],"sourcesContent":["import { TextDecoder, TextEncoder } from 'util';\nimport {\n  addPadding,\n  concat,\n  fromHex,\n  fromUtf8,\n  getTextDecoder,\n  getTextEncoder,\n  set,\n  stripPrefix,\n  toBuffer,\n  toHex,\n  toNumber,\n  toUtf8\n} from './buffer';\n\ndescribe('stripHexPrefix', () => {\n  it('removes the hex prefix of a hex string', () => {\n    expect(stripPrefix('0x12345')).toBe('12345');\n    expect(stripPrefix('12345')).toBe('12345');\n  });\n});\n\ndescribe('getTextEncoder', () => {\n  it('returns a text encoder that works in Node.js and browsers', () => {\n    expect(getTextEncoder()).toBeInstanceOf(TextEncoder);\n  });\n});\n\ndescribe('getTextDecoder', () => {\n  it('returns a text decoder that works in Node.js and browsers', () => {\n    expect(getTextDecoder()).toBeInstanceOf(TextDecoder);\n  });\n});\n\ndescribe('toUtf8', () => {\n  it('returns a UTF-8 string from a buffer', () => {\n    expect(toUtf8(fromHex('666f6f206261722062617a'))).toBe('foo bar baz');\n  });\n});\n\ndescribe('fromUtf8', () => {\n  it('returns a buffer from a UTF-8 string', () => {\n    expect(toHex(fromUtf8('foo bar baz'))).toBe('666f6f206261722062617a');\n  });\n});\n\ndescribe('toHex', () => {\n  it('returns a hex string from a buffer', () => {\n    const buffer = fromHex('666f6f206261722062617a');\n    expect(toHex(buffer)).toBe('666f6f206261722062617a');\n  });\n});\n\ndescribe('fromHex', () => {\n  it('returns a buffer from a hex string', () => {\n    expect(fromHex('666f6f206261722062617a')).toBeInstanceOf(Uint8Array);\n    expect(toHex(fromHex('666f6f206261722062617a'))).toBe('666f6f206261722062617a');\n  });\n\n  it('works with a 0x prefix', () => {\n    expect(toHex(fromHex('0x666f6f206261722062617a'))).toBe('666f6f206261722062617a');\n  });\n\n  it('throws for invalid input', () => {\n    expect(() => fromHex('0')).toThrow();\n    expect(() => fromHex('foo bar')).toThrow();\n  });\n});\n\ndescribe('toBuffer', () => {\n  it('returns a buffer from different types', () => {\n    expect(toHex(toBuffer('0x1234'))).toBe('1234');\n    expect(toHex(toBuffer('1234'))).toBe('1234');\n    expect(toHex(toBuffer(1234))).toBe('00000000000000000000000000000000000000000000000000000000000004d2');\n    expect(toHex(toBuffer(1234n))).toBe('00000000000000000000000000000000000000000000000000000000000004d2');\n    expect(toHex(toBuffer([0x04, 0xd2]))).toBe('04d2');\n  });\n});\n\ndescribe('concat', () => {\n  it('concatenates multiple buffers', () => {\n    expect(toHex(concat([fromHex('1234')]))).toBe('1234');\n    expect(toHex(concat([fromHex('1234'), fromHex('5678')]))).toBe('12345678');\n    expect(toHex(concat([fromHex('1234'), fromHex('5678'), fromHex('9101')]))).toBe('123456789101');\n  });\n});\n\ndescribe('set', () => {\n  it('sets a buffer in another buffer at a specific position', () => {\n    expect(toHex(set(fromHex('1234567890'), fromHex('00'), 2))).toBe('1234007890');\n  });\n});\n\ndescribe('addPadding', () => {\n  it('adds padding to a buffer up to the specified length', () => {\n    expect(toHex(addPadding(fromHex('1234')))).toBe('1234000000000000000000000000000000000000000000000000000000000000');\n    expect(toHex(addPadding(fromHex('1234'), 16))).toBe('12340000000000000000000000000000');\n    expect(toHex(addPadding(fromHex('1234'), 0))).toBe('1234');\n  });\n});\n\ndescribe('toNumber', () => {\n  it('returns a bigint from a buffer', () => {\n    const buffer = toBuffer(1234n);\n    expect(toNumber(buffer)).toBe(1234n);\n  });\n});\n"],"mappings":"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"}